@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  .ai-panel { @apply w-full bg-white dark:bg-slate-900 min-h-screen; }
  .ai-container { @apply max-w-4xl mx-auto px-6 pt-3 pb-8 space-y-6; }

  .ai-section-header { @apply flex items-center gap-2 mb-5; }
  .ai-title-lg { @apply text-xl font-semibold text-neutral-900 dark:text-slate-100; }
  .ai-title-md { @apply text-lg font-semibold text-neutral-900 dark:text-slate-100; }
  .ai-refresh-btn { 
    @apply flex items-center gap-2 px-5 py-2.5 bg-transparent text-neutral-700 dark:text-neutral-300 text-sm font-medium rounded-lg 
           hover:bg-neutral-100 dark:hover:bg-slate-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 
           border border-neutral-200 dark:border-neutral-700 hover:border-neutral-300 dark:hover:border-neutral-600; 
  }

  .ai-card { @apply bg-white dark:bg-slate-800 border border-neutral-200 dark:border-neutral-700 rounded-lg p-6; }
  .ai-card-md { @apply rounded-lg p-4 border border-neutral-200 dark:border-neutral-700; }

  .ai-list-item { @apply flex items-start gap-2 text-sm text-neutral-700 dark:text-neutral-300; }
  .ai-analysis-card { @apply border border-neutral-200 dark:border-neutral-700 rounded-lg p-4 bg-neutral-50 dark:bg-slate-800; }
  .ai-subtitle { @apply font-semibold text-neutral-900 dark:text-slate-100; }
  .ai-paragraph { @apply text-sm text-neutral-600 dark:text-neutral-300; }
  .ai-suggestions-list { @apply space-y-1; }
  .ai-suggestions-title { @apply text-xs font-medium text-neutral-700 dark:text-neutral-400 uppercase tracking-wide; }
  .ai-suggestion-item { @apply flex items-start gap-2 text-sm text-neutral-600 dark:text-neutral-300; }

  .ai-ats-card { @apply bg-gradient-to-br from-blue-50 to-indigo-50 dark:bg-gradient-to-br dark:from-neutral-900 dark:to-blue-900/15 border border-blue-200 dark:border-neutral-700 rounded-lg p-6; }
  .ai-ats-item { @apply flex items-center gap-3; }

  .ai-readability-metric { @apply flex items-center justify-between p-3 bg-neutral-50 dark:bg-slate-800 rounded-lg border border-neutral-200 dark:border-neutral-700; }
  .ai-readability-good { @apply text-green-600; }
  .ai-readability-warning { @apply text-yellow-600; }
  .ai-readability-error { @apply text-red-600; }

  .ai-action-item { @apply flex items-start gap-3 p-3 bg-white dark:bg-slate-800 rounded-lg border border-neutral-200 dark:border-neutral-700; }
  .ai-keyword-strong { @apply px-3 py-1 rounded-full text-xs font-medium border bg-green-100 text-green-800 dark:text-green-300 border-green-300 dark:border-green-700; }
  .ai-keyword-medium { @apply px-3 py-1 rounded-full text-xs font-medium border bg-yellow-100 text-yellow-800 dark:text-yellow-300 border-yellow-300 dark:border-yellow-700; }
  .ai-keyword-weak { @apply px-3 py-1 rounded-full text-xs font-medium border bg-red-100 text-red-800 dark:text-red-300 border-red-300 dark:border-red-700; }
  .ai-suggested-keyword { @apply px-3 py-1 rounded-full text-xs font-medium bg-red-50 border-red-200; }

  .ai-score-banner { @apply rounded-xl border-2 p-6 border-neutral-200 dark:border-neutral-700; }
  .ai-score-banner--good { @apply bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800; }
  .ai-score-banner--medium { @apply bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-800; }
  .ai-score-banner--bad { @apply bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800; }

  .ai-score-value { @apply text-5xl font-bold; }
  .ai-score-value--good { @apply text-green-600 dark:text-green-400; }
  .ai-score-value--medium { @apply text-yellow-600 dark:text-yellow-400; }
  .ai-score-value--bad { @apply text-red-600 dark:text-red-400; }

  .ai-score-progress { @apply mt-4 bg-neutral-200 dark:bg-neutral-700 rounded-full h-3 overflow-hidden; }
  .ai-score-progress-fill { @apply h-full rounded-full transition-all duration-500; }
  .ai-score-progress-fill--good { @apply bg-green-500; }
  .ai-score-progress-fill--medium { @apply bg-yellow-500; }
  .ai-score-progress-fill--bad { @apply bg-red-500; }

  .ai-grid-3 { @apply grid grid-cols-1 md:grid-cols-3 gap-4; }
  .ai-grid-2 { @apply grid grid-cols-1 md:grid-cols-2 gap-6; }

  .ai-flex-between { @apply flex items-center justify-between; }
  .ai-mini-header { @apply flex items-center gap-2 mb-2; }
  .ai-flex-wrap-gap { @apply flex flex-wrap gap-2; }

  /* DashboardLayout */
  .layout-container { @apply h-screen bg-gray-50 flex flex-col overflow-hidden; }
  .layout-mobile-header { @apply md:hidden bg-white border-b border-gray-200 p-4 flex items-center justify-between shrink-0 z-30; }
  .layout-sidebar-overlay { @apply fixed inset-0 bg-black/50 z-40 md:hidden; }
  .layout-sidebar { @apply bg-white border-r border-gray-200 flex flex-col fixed inset-y-0 left-0 z-50 w-64 transition-transform duration-300 ease-in-out md:translate-x-0 md:static; }
  .layout-sidebar-header { @apply p-6 border-b border-gray-100 flex justify-between items-center; }
  .layout-nav-item { @apply flex items-center gap-3 px-3 py-2 rounded-md transition-colors; }
  .layout-nav-item-active { @apply bg-blue-50 text-blue-600; }
  .layout-nav-item-inactive { @apply text-gray-600 hover:bg-gray-50 hover:text-gray-900; }

  /* EditorPage */
  .editor-section-card { @apply bg-white border border-gray-200 rounded-xl shadow-sm mb-4 transition-all duration-200 hover:shadow-md overflow-hidden; }
  .editor-section-header { @apply flex items-center p-4 bg-white border-b border-gray-100 hover:bg-gray-50/50 transition-colors; }
  .editor-drag-handle { @apply cursor-move text-gray-300 hover:text-gray-500 mr-3 transition-colors outline-none p-1 rounded hover:bg-gray-100; }
  .editor-section-content { @apply p-6 bg-white animate-in slide-in-from-top-2 duration-200; }

  /* Button */
  .btn { @apply inline-flex items-center justify-center gap-2 rounded-xl font-bold transition-all duration-200 active:scale-95 active:translate-y-0 disabled:opacity-50 disabled:pointer-events-none disabled:active:scale-100 hover:-translate-y-0.5; }
  .btn-primary { @apply bg-[#04659A] text-white hover:bg-[#035482] shadow-md hover:shadow-xl border border-transparent; }
  .btn-secondary { @apply bg-white text-gray-900 border border-gray-200 hover:bg-gray-50 hover:border-gray-300 shadow-sm hover:shadow-md; }
  .btn-outline { @apply bg-transparent border border-blue-200 text-blue-600 hover:bg-blue-50 shadow-sm hover:shadow-md; }
  .btn-ghost { @apply bg-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900 border border-transparent shadow-none; }
  .btn-danger { @apply bg-red-600 text-white hover:bg-red-700 shadow-md hover:shadow-xl border border-transparent; }
  .btn-sm { @apply px-3 py-1.5 text-xs; }
  .btn-md { @apply px-5 py-2.5 text-sm; }
  .btn-lg { @apply px-6 py-3 text-base; }

  /* Badge */
  .badge { @apply inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full border text-[10px] font-medium transition-colors; }
  .badge-default { @apply bg-blue-50 text-blue-700 border-blue-100; }
  .badge-secondary { @apply bg-gray-50 text-gray-600 border-gray-100; }
  .badge-outline { @apply bg-transparent text-gray-700 border-gray-200; }
  .badge-success { @apply bg-green-50 text-green-700 border-green-100; }
  .badge-warning { @apply bg-amber-50 text-amber-700 border-amber-100; }
  .badge-error { @apply bg-red-50 text-red-700 border-red-100; }

  /* Shared Form Styles */
  .form-container { @apply space-y-5 animate-in fade-in duration-500; }
  .form-grid-2 { @apply grid grid-cols-1 md:grid-cols-2 gap-4; }

  /* Experience & Education Item Styles (Modern) */
  .item-card { @apply border border-gray-200/60 rounded-2xl mb-4 bg-white shadow-sm overflow-hidden transition-all duration-300 hover:shadow-md; }
  .item-header { @apply flex items-center justify-between p-4 cursor-pointer bg-white border-b border-gray-100 hover:bg-gray-50/50 transition-colors; }
  .item-icon-container { @apply p-2 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl text-blue-600 shadow-sm border border-blue-100/50; }
  .item-delete-btn { @apply text-gray-400 hover:text-red-500 p-2 rounded-xl hover:bg-red-50 transition-all duration-200; }
  .item-content { @apply p-6 border-t border-gray-100 space-y-5 animate-in slide-in-from-top-2 duration-200 bg-white; }
  .item-controls { @apply flex items-center gap-2 opacity-60 group-hover:opacity-100 transition-opacity; }

  /* Project Item Styles */
  .project-card { @apply border border-gray-200 rounded-lg mb-4 bg-white shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md; }
  .project-header { @apply flex items-center justify-between p-4 cursor-pointer bg-gray-50/50 hover:bg-gray-50 transition-colors; }
  .project-icon-container { @apply p-2 bg-blue-50 rounded-md text-blue-600; }
  .project-delete-btn { @apply text-gray-400 hover:text-red-500 p-2 rounded-full hover:bg-red-50 transition-all duration-200; }
  .project-content { @apply p-4 border-t border-gray-100 space-y-4 animate-in slide-in-from-top-2 duration-200 bg-white; }

  /* Skills Styles */
  .skills-container { @apply space-y-6 animate-in fade-in duration-500; }
  .skills-empty-state { @apply text-center py-12 px-4 text-gray-500 bg-white rounded-2xl border border-dashed border-gray-200 hover:border-blue-300 hover:shadow-sm transition-all duration-300; }
  .skills-empty-icon { @apply w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center mx-auto mb-4 text-blue-600 group-hover:scale-110 transition-transform duration-300; }
  .skill-item { @apply relative animate-in slide-in-from-bottom-2 duration-200; }
  .skill-delete-btn { @apply absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-red-500 p-1.5 rounded-full hover:bg-red-50 transition-all duration-200 opacity-0 group-hover:opacity-100 focus:opacity-100; }
  .skill-add-btn { @apply w-full py-4 border border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-blue-400 hover:text-blue-600 hover:bg-blue-50/50 transition-all duration-300 flex items-center justify-center gap-2 font-bold text-sm; }

  /* Summary Form */
  .summary-card { @apply bg-white p-6 rounded-2xl border border-gray-200 shadow-sm; }
  .summary-content { @apply flex items-start gap-4; }
  .summary-icon { @apply p-2 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl text-blue-600 shadow-sm border border-blue-100/50 mt-1 hidden sm:block; }

  /* Theme Settings Form */
  .theme-card { @apply bg-white border border-gray-200/60 rounded-2xl p-6 mb-6 shadow-sm hover:shadow-md transition-shadow duration-300; }
  .theme-header { @apply flex items-center gap-3 mb-6 border-b border-gray-100 pb-4; }
  .theme-icon { @apply p-2.5 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl text-purple-600 shadow-sm border border-purple-100/50; }
  .color-swatch { @apply w-9 h-9 rounded-full transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-4 focus:ring-gray-100 shadow-sm relative; }
  .color-swatch-active { @apply ring-2 ring-offset-2 ring-gray-900 scale-110 z-10; }
  .color-swatch-inactive { @apply hover:ring-2 hover:ring-offset-1 hover:ring-gray-200 border border-transparent; }

  /* Form Controls */
  .input-field {
    @apply flex h-10 w-full rounded-xl border border-gray-200 bg-gray-50/50 px-3 py-2 text-sm ring-offset-white 
    file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 
    focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-500/20 focus-visible:border-purple-500/50 
    focus:bg-white disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200
    hover:border-gray-300 hover:bg-white;
  }
  .input-field-error { @apply border-red-500 focus-visible:ring-red-500; }
  .input-label { @apply block text-sm font-medium text-gray-700 mb-1.5 ml-0.5; }
  .input-icon-wrapper { @apply absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400; }
  .input-error-msg { @apply mt-1.5 text-xs text-red-500; }

  .textarea-field {
    @apply flex min-h-[80px] w-full rounded-lg border border-gray-200 bg-white px-3 py-2 text-sm ring-offset-white 
    placeholder:text-gray-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-600 focus-visible:ring-offset-0 
    disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200
    hover:border-gray-300;
  }
  .textarea-field-error { @apply border-red-500 focus-visible:ring-red-500; }

  .checkbox-wrapper { @apply flex items-center space-x-2; }
  .checkbox-input { @apply h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-600 transition duration-150 ease-in-out cursor-pointer; }
  .checkbox-label { @apply text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-gray-700 cursor-pointer; }

  /* Toast */
  .toast-container { @apply fixed top-6 right-6 z-50 flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg border; }
  .toast-success { @apply bg-white border-green-100; }
  .toast-error { @apply bg-white border-red-100; }
  .toast-info { @apply bg-white border-blue-100; }
  .toast-close-btn { @apply p-1 hover:bg-gray-100 rounded-full text-gray-400 transition-colors; }

  /* Rich Text Editor */
  .rich-text-container {
    @apply rounded-xl border border-gray-200 bg-gray-50/50 overflow-hidden transition-all duration-200
    hover:border-gray-300 hover:bg-white focus-within:bg-white focus-within:ring-2 focus-within:ring-purple-500/20 focus-within:border-purple-500/50;
  }
  .rich-text-container-error { @apply border-red-500 focus-within:ring-red-500; }

  /* Empty States for Projects/Education */
  .empty-state-dashed {
    @apply text-center py-12 px-4 text-gray-500 bg-gray-50/50 rounded-2xl border-2 border-dashed border-gray-200 
    hover:border-blue-200 hover:bg-blue-50/30 transition-all duration-300 hover:scale-[1.02];
  }
  .empty-state-icon-dashed {
    @apply w-16 h-16 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl flex items-center justify-center mx-auto mb-4 text-blue-600 shadow-sm;
  }
  .empty-state-icon-circle {
    @apply w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3 text-blue-600;
  }
  .empty-state-add-btn {
    @apply w-full py-4 border-2 border-dashed border-gray-200 rounded-xl text-gray-500 hover:border-blue-300 hover:text-blue-600 hover:bg-blue-50/30 transition-all duration-300 flex items-center justify-center gap-2 font-semibold;
  }
  .btn-cta-blue {
    @apply inline-flex items-center gap-2 px-6 py-2.5 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-300 shadow-md hover:shadow-lg font-medium;
  }

  /* Theme Settings Form Extras */
  .select-field {
    @apply appearance-none block w-full rounded-xl border border-gray-200 bg-gray-50/50 px-4 py-3 text-sm font-medium text-gray-700 ring-offset-white placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500/20 focus:border-purple-500/50 transition-all duration-200 hover:bg-white hover:border-gray-300 cursor-pointer;
  }
  .theme-color-input-wrapper {
    @apply w-9 h-9 rounded-full border border-gray-200 flex items-center justify-center bg-white transition-all duration-300 group-hover:border-gray-300 group-hover:shadow-sm;
  }
  .theme-color-input-wrapper-active {
    @apply ring-2 ring-offset-2 ring-gray-900 border-transparent;
  }

  /* Skills Form Extras */
  .form-grid-sm-2 { @apply grid grid-cols-1 sm:grid-cols-2 gap-4; }
  .skill-add-icon { @apply p-1 rounded-md bg-gray-100 group-hover:bg-blue-100 transition-colors; }

}

/* Global overrides for Quill */
.rich-text-editor .ql-container {
  border: none !important;
  font-family: inherit;
  font-size: 0.875rem; /* text-sm */
  min-height: 120px;
}
.rich-text-editor .ql-toolbar {
  border: none !important;
  border-bottom: 1px solid #e5e7eb !important; /* border-gray-200 */
  background-color: transparent;
}
.rich-text-editor .ql-editor {
  min-height: 120px;
}
.rich-text-editor .ql-editor.ql-blank::before {
  font-style: normal;
  color: #9ca3af; /* text-gray-400 */
}

@media print {
  body * {
    visibility: hidden;
  }
  #cv-preview, #cv-preview * {
    visibility: visible;
  }
  #cv-preview {
    position: absolute;
    left: 0;
    top: 0;
    width: 21cm; /* A4 width */
    height: 29.7cm; /* A4 height */
    margin: 0;
    padding: 0;
    box-shadow: none;
    transform: none !important;
  }
  
  /* Ensure background colors are printed */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
}

/* Rich Text Styles for Preview */
.rich-text-content ul {
  list-style-type: disc;
  padding-left: 1.25rem;
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
}

.rich-text-content ol {
  list-style-type: decimal;
  padding-left: 1.25rem;
  margin-top: 0.25rem;
  margin-bottom: 0.25rem;
}

.rich-text-content p {
  margin-bottom: 0.25rem;
}

.rich-text-content p:last-child {
  margin-bottom: 0;
}

.rich-text-content strong {
  font-weight: 600;
}

.rich-text-content em {
  font-style: italic;
}

.rich-text-content u {
  text-decoration: underline;
}